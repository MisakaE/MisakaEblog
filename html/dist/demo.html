<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="markdown-palettes.min.js"></script>
    <link rel="stylesheet" href="markdown-palettes.css">
</head>

<body>
    <div style="height: 800px">
        <div id="editor"></div>
    </div>

    <script>
        let editor = new MarkdownPalettes('#editor');
    </script>

    <button onclick="myFunction()">Click me</button>
    <script>
        function myFunction() {


            const elements = document.querySelectorAll('.mp-preview-content')[0].innerHTML;
            document.write("<form action=\"/addtext\" method=\"post\">")
            document.write("<textarea name=\"text\">");
            document.write(elements)
            document.write("</textarea>");
            document.write("<input name=\"token\" value=\"token\">")
            document.write("<input name=\"title\" value=\"title\">")
            document.write("<input name=\"group\" value=\"默认\">")
            document.write("<input type=\"submit\" value=\"提交\">")
            
            const now = new Date();
            const time = Date.now();
            const year = now.getFullYear();
            const month = ('0' + (now.getMonth() + 1)).slice(-2);
            const day = ('0' + now.getDate()).slice(-2);
            const hours = ('0' + now.getHours()).slice(-2);
            const minutes = ('0' + now.getMinutes()).slice(-2);
            const formattedTime = year +"-"+ month +"-"+ day +"&nbsp;"+ hours +":"+ minutes;
            document.write("<input name=\"date\" value=")
            document.write(formattedTime)
            document.write(">")
            document.write("<input name=\"time\" value=")
            document.write(time)
            document.write(">")
            document.write("</form>")

        }
    </script>
</body>

</html>